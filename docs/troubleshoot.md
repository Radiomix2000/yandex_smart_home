# Устранение проблем и ошибок

!!! bug "При возникновении любых проблем и ошибок сперва загляните в журнал Home Assistant: `Настройки` --> `Система` --> [`Журнал сервера`](https://my.home-assistant.io/redirect/logs/)"

## Устройство не появляется в УДЯ { id=missing-device }

* Убедитесь, что:
     1. Объект, для которого будет создано устройство, выбран в [списке объектов для передачи в УДЯ](./config/filter.md)
     2. Объект есть в [списке поддерживаемых устройств](./supported-devices.md) (особенно актуально для датчиков без `device_class`)
     3. В [`Журнале сервера`](https://my.home-assistant.io/redirect/logs/) нет ошибок

* Перезапустите Home Assistant
* Выполните ручное [Обновление списка устройств](./quasar.md#discovery)

Если это не помогло - создайте [issue](https://github.com/dext0r/yandex_smart_home/issues) или напишите в [чат](https://t.me/yandex_smart_home).
К сообщению приложите:

* **ID** и **атрибуты** проблемных объектов: их можно найти в `Панель разработчика` > `Состояния`
  ![](./assets/images/entity-state.png){ width=700 }

* YAML конфигурацию `yandex_smart_home` (если имеется, лучше целиком, или только `filter` и `entity_config` для проблемного объекта)
* Для облачного подключения:
  * Первые 6 символов вашего ID (можно посмотреть в [настройках интеграции](./config/getting-started.md#gui))
  * Дату и время обновления списка устройств

## Устройство в УДЯ поддерживает не все функции { id=blinking-features }

Некоторые устройства изменяют список поддерживаемых функций в зависимости от своего состояния. Особенно часто это поведение замечено за `media_player`.

Если в УДЯ у устройства отсутствует функция, которая точно должна быть - попробуйте [Обновить список устройств](./quasar.md#discovery) при включенном устройстве.

Так же может помочь настройка [`features`](./config/entity.md#features) для явного указания поддерживаемых устройством функций.

## Устройство отвязалось { id=unlinked }

Необходимо вручную [Обновить список устройств](./quasar.md#discovery), но сделать это не из списка навыков, а **зайти в навык** и нажать там кнопку `Обновить список устройств` или `Привязать к Яндексу`.

## State requested for unexposed entity { id=unexposed-entity }

В УДЯ присутствует устройство, но объект по которому оно создано не выбран в [объектах для передачи в УДЯ](./config/filter.md).

Для исправления: удалите устройство из УДЯ или добавьте [объект](./faq.md#get-entity-id-quasar) в список устройств для передачи.

## Unsupported mode "XXX" { id=unsupported-mode }

Не удалось связать режимы между УДЯ и Home Assistant. Если нет необходимости выбирать проблемные режимы - ошибку можно игнорировать.

Для исправления: настройте [связь режимов](./config/modes.md) УДЯ <--> HA

## Notification request failed

Ряд ошибок, которые могут возникает при отправке в УДЯ уведомлений об изменении состояний устройств. Ошибки могут возникать периодически - это нормально. Если ошибок мало - просто очистите журнал.

### Notification request failed: UNKNOWN_USER { id=unknown-user }

* Вручную [обновите список устройств](./quasar.md#discovery)
* Для прямого подключения: убедитесь, что в параметрах навыка в [настройках интеграции](./config/getting-started.md#gui) выбран пользователь, который использовался при привязке Home Assistant к УДЯ

### Notification request failed: Unauthorized { id=notifier-unauthorized }

Только для прямого подключения: обновите токен в параметрах навыка в [настройках интеграции](./config/getting-started.md#gui) и убедитесь, что указан верный Идентификатор диалога
